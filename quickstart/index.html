<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Extra functionality build on top of Strawberry Django"><meta name=author content="Giorgos Gernas"><link rel=prev href=..><link href=../breaking_changes/ rel=next><link rel=icon href=../img/sdj-extras.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.11"><title>Quick Start - Strawberry Django Extras</title><link rel=stylesheet href=../assets/stylesheets/main.fad675c6.min.css><link rel=stylesheet href=../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=teal> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#quick-start class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Strawberry Django Extras" class="md-header__button md-logo" aria-label="Strawberry Django Extras" data-md-component=logo> <img src=../img/sdj-extras.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Strawberry Django Extras </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Quick Start </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/m4riok/strawberry-django-extras title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> strawberry-django-extras </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Strawberry Django Extras" class="md-nav__button md-logo" aria-label="Strawberry Django Extras" data-md-component=logo> <img src=../img/sdj-extras.png alt=logo> </a> Strawberry Django Extras </label> <div class=md-nav__source> <a href=https://github.com/m4riok/strawberry-django-extras title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> strawberry-django-extras </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Quick Start </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Quick Start </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#jwt-authentication class=md-nav__link> <span class=md-ellipsis> JWT Authentication </span> </a> <nav class=md-nav aria-label="JWT Authentication"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-the-jwt-authentication-backend-to-your-settings class=md-nav__link> <span class=md-ellipsis> Add the JWT Authentication Backend to your settings </span> </a> </li> <li class=md-nav__item> <a href=#add-the-jwt-middleware-to-your-settings class=md-nav__link> <span class=md-ellipsis> Add the JWT Middleware to your settings </span> </a> </li> <li class=md-nav__item> <a href=#expose-the-mutations-in-your-graphql-schema class=md-nav__link> <span class=md-ellipsis> Expose the mutations in your GraphQL schema </span> </a> </li> <li class=md-nav__item> <a href=#override-any-settings-you-might-need-in-your-project-settings class=md-nav__link> <span class=md-ellipsis> Override any settings you might need in your project settings. </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mutation-hooks class=md-nav__link> <span class=md-ellipsis> Mutation Hooks </span> </a> </li> <li class=md-nav__item> <a href=#input-validations class=md-nav__link> <span class=md-ellipsis> Input Validations </span> </a> </li> <li class=md-nav__item> <a href=#permissions class=md-nav__link> <span class=md-ellipsis> Permissions </span> </a> </li> <li class=md-nav__item> <a href=#nested-mutations class=md-nav__link> <span class=md-ellipsis> Nested Mutations </span> </a> <nav class=md-nav aria-label="Nested Mutations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#wrappers-for-nested-objects-for-create-mutations class=md-nav__link> <span class=md-ellipsis> Wrappers for nested objects for create mutations </span> </a> <nav class=md-nav aria-label="Wrappers for nested objects for create mutations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#one-to-one class=md-nav__link> <span class=md-ellipsis> One to One </span> </a> </li> <li class=md-nav__item> <a href=#one-to-many class=md-nav__link> <span class=md-ellipsis> One to Many </span> </a> </li> <li class=md-nav__item> <a href=#many-to-one class=md-nav__link> <span class=md-ellipsis> Many to One </span> </a> </li> <li class=md-nav__item> <a href=#many-to-many class=md-nav__link> <span class=md-ellipsis> Many to Many </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wrappers-for-nested-objects-for-update-mutations class=md-nav__link> <span class=md-ellipsis> Wrappers for nested objects for update mutations </span> </a> <nav class=md-nav aria-label="Wrappers for nested objects for update mutations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#one-to-one_1 class=md-nav__link> <span class=md-ellipsis> One to One </span> </a> </li> <li class=md-nav__item> <a href=#one-to-many_1 class=md-nav__link> <span class=md-ellipsis> One to Many </span> </a> </li> <li class=md-nav__item> <a href=#many-to-one_1 class=md-nav__link> <span class=md-ellipsis> Many to One </span> </a> </li> <li class=md-nav__item> <a href=#many-to-many_1 class=md-nav__link> <span class=md-ellipsis> Many to Many </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../breaking_changes/ class=md-nav__link> <span class=md-ellipsis> Breaking Changes </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../guide/jwt/ class=md-nav__link> <span class=md-ellipsis> JWT Authentication </span> </a> </li> <li class=md-nav__item> <a href=../guide/validation/ class=md-nav__link> <span class=md-ellipsis> Input Validations </span> </a> </li> <li class=md-nav__item> <a href=../guide/permissions/ class=md-nav__link> <span class=md-ellipsis> Permissions </span> </a> </li> <li class=md-nav__item> <a href=../guide/hooks/ class=md-nav__link> <span class=md-ellipsis> Mutation Hooks </span> </a> </li> <li class=md-nav__item> <a href=../guide/mutations/ class=md-nav__link> <span class=md-ellipsis> Nested Mutations </span> </a> </li> <li class=md-nav__item> <a href=../guide/pagination/ class=md-nav__link> <span class=md-ellipsis> Pagination </span> </a> </li> <li class=md-nav__item> <a href=../guide/lazy_loading/ class=md-nav__link> <span class=md-ellipsis> Lazy Loading </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../community-projects/ class=md-nav__link> <span class=md-ellipsis> Community Projects </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#jwt-authentication class=md-nav__link> <span class=md-ellipsis> JWT Authentication </span> </a> <nav class=md-nav aria-label="JWT Authentication"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-the-jwt-authentication-backend-to-your-settings class=md-nav__link> <span class=md-ellipsis> Add the JWT Authentication Backend to your settings </span> </a> </li> <li class=md-nav__item> <a href=#add-the-jwt-middleware-to-your-settings class=md-nav__link> <span class=md-ellipsis> Add the JWT Middleware to your settings </span> </a> </li> <li class=md-nav__item> <a href=#expose-the-mutations-in-your-graphql-schema class=md-nav__link> <span class=md-ellipsis> Expose the mutations in your GraphQL schema </span> </a> </li> <li class=md-nav__item> <a href=#override-any-settings-you-might-need-in-your-project-settings class=md-nav__link> <span class=md-ellipsis> Override any settings you might need in your project settings. </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mutation-hooks class=md-nav__link> <span class=md-ellipsis> Mutation Hooks </span> </a> </li> <li class=md-nav__item> <a href=#input-validations class=md-nav__link> <span class=md-ellipsis> Input Validations </span> </a> </li> <li class=md-nav__item> <a href=#permissions class=md-nav__link> <span class=md-ellipsis> Permissions </span> </a> </li> <li class=md-nav__item> <a href=#nested-mutations class=md-nav__link> <span class=md-ellipsis> Nested Mutations </span> </a> <nav class=md-nav aria-label="Nested Mutations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#wrappers-for-nested-objects-for-create-mutations class=md-nav__link> <span class=md-ellipsis> Wrappers for nested objects for create mutations </span> </a> <nav class=md-nav aria-label="Wrappers for nested objects for create mutations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#one-to-one class=md-nav__link> <span class=md-ellipsis> One to One </span> </a> </li> <li class=md-nav__item> <a href=#one-to-many class=md-nav__link> <span class=md-ellipsis> One to Many </span> </a> </li> <li class=md-nav__item> <a href=#many-to-one class=md-nav__link> <span class=md-ellipsis> Many to One </span> </a> </li> <li class=md-nav__item> <a href=#many-to-many class=md-nav__link> <span class=md-ellipsis> Many to Many </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wrappers-for-nested-objects-for-update-mutations class=md-nav__link> <span class=md-ellipsis> Wrappers for nested objects for update mutations </span> </a> <nav class=md-nav aria-label="Wrappers for nested objects for update mutations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#one-to-one_1 class=md-nav__link> <span class=md-ellipsis> One to One </span> </a> </li> <li class=md-nav__item> <a href=#one-to-many_1 class=md-nav__link> <span class=md-ellipsis> One to Many </span> </a> </li> <li class=md-nav__item> <a href=#many-to-one_1 class=md-nav__link> <span class=md-ellipsis> Many to One </span> </a> </li> <li class=md-nav__item> <a href=#many-to-many_1 class=md-nav__link> <span class=md-ellipsis> Many to Many </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=quick-start>Quick Start<a class=headerlink href=#quick-start title="Permanent link">&para;</a></h1> <h2 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">&para;</a></h2> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span>strawberry-django-extras
</code></pre></div></td></tr></table></div> <p><br></p> <h2 id=jwt-authentication>JWT Authentication<a class=headerlink href=#jwt-authentication title="Permanent link">&para;</a></h2> <p>The JWT part of this package is heavily based on the <a href=https://github.com/flavors/django-graphql-jwt target=_blank>django-graphql-jwt</a> package. Noting that, not all features supported by that package are supported here. For details on what is supported please refer to the the <a href=../guide/jwt/ >JWT part of these docs</a>.</p> <p><br></p> <h4 id=add-the-jwt-authentication-backend-to-your-settings>Add the JWT Authentication Backend to your settings<a class=headerlink href=#add-the-jwt-authentication-backend-to-your-settings title="Permanent link">&para;</a></h4> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>settings.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span>
<span class=normal><a href=#__codelineno-1-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a>  <span class=n>AUTHENTICATION_BACKENDS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-1-2 name=__codelineno-1-2></a>    <span class=s1>&#39;strawberry_django_extras.jwt.backend.JWTBackend&#39;</span><span class=p>,</span>
<a id=__codelineno-1-3 name=__codelineno-1-3></a>    <span class=s1>&#39;django.contrib.auth.backends.ModelBackend&#39;</span><span class=p>,</span>
<a id=__codelineno-1-4 name=__codelineno-1-4></a><span class=p>]</span>
</code></pre></div></td></tr></table></div> <p><br></p> <h4 id=add-the-jwt-middleware-to-your-settings>Add the JWT Middleware to your settings<a class=headerlink href=#add-the-jwt-middleware-to-your-settings title="Permanent link">&para;</a></h4> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>settings.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span>
<span class=normal><a href=#__codelineno-2-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a>  <span class=n>MIDDLEWARE</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-2-2 name=__codelineno-2-2></a>    <span class=o>...</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a>    <span class=s2>&quot;strawberry_django_extras.jwt.middleware.jwt_middleware&quot;</span><span class=p>,</span>
<a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=p>]</span>
</code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This implementation of the middleware is different from other implementations in that it is designed to handle token based authentication for all request containing the <code>Authorization</code> header regardless of wether the request is to be consumed by your GraphQL view. This aims to provide a unified way of authenticating via JWT tokens issued by this package accross your entire application. </p> <p>If the request contains the <code>Authorization</code> header and the token is valid, the user will be authenticated and the <code>request.user</code> will be set to the user associated with the token. If the token is expired a <code>401</code> response will be returned along with <code>Token Expired</code>. If an invalid token is provided a <code>401</code> response will be returned along with <code>Invalid Token</code>.</p> <p>If the user is already authenticated by some previous middleware in your middleware stack it will be respected and the token will not be checked at all. The order of the middleware in your middleware stack is important and you can set it depending on your needs. </p> </div> <p><br></p> <h4 id=expose-the-mutations-in-your-graphql-schema>Expose the mutations in your GraphQL schema<a class=headerlink href=#expose-the-mutations-in-your-graphql-schema title="Permanent link">&para;</a></h4> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>schema.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span>
<span class=normal><a href=#__codelineno-3-2>2</a></span>
<span class=normal><a href=#__codelineno-3-3>3</a></span>
<span class=normal><a href=#__codelineno-3-4>4</a></span>
<span class=normal><a href=#__codelineno-3-5>5</a></span>
<span class=normal><a href=#__codelineno-3-6>6</a></span>
<span class=normal><a href=#__codelineno-3-7>7</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class=kn>from</span> <span class=nn>strawberry_django_extras.jwt.mutations</span> <span class=kn>import</span> <span class=n>JWTMutations</span>
<a id=__codelineno-3-2 name=__codelineno-3-2></a>
<a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=nd>@strawberry</span><span class=o>.</span><span class=n>type</span>
<a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=k>class</span> <span class=nc>Mutation</span><span class=p>:</span>
<a id=__codelineno-3-5 name=__codelineno-3-5></a>    <span class=n>request_token</span> <span class=o>=</span> <span class=n>JWTMutations</span><span class=o>.</span><span class=n>issue</span>
<a id=__codelineno-3-6 name=__codelineno-3-6></a>    <span class=n>revoke_token</span> <span class=o>=</span> <span class=n>JWTMutations</span><span class=o>.</span><span class=n>revoke</span>
<a id=__codelineno-3-7 name=__codelineno-3-7></a>    <span class=n>verify_token</span> <span class=o>=</span> <span class=n>JWTMutations</span><span class=o>.</span><span class=n>verify</span>
</code></pre></div></td></tr></table></div> <p><br></p> <h4 id=override-any-settings-you-might-need-in-your-project-settings>Override any settings you might need in your project settings.<a class=headerlink href=#override-any-settings-you-might-need-in-your-project-settings title="Permanent link">&para;</a></h4> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>settings.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=n>GRAPHQL_JWT</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-4-2 name=__codelineno-4-2></a>    <span class=s1>&#39;JWT_ALGORITHM&#39;</span><span class=p>:</span> <span class=s1>&#39;EdDSA&#39;</span><span class=p>,</span>
<a id=__codelineno-4-3 name=__codelineno-4-3></a>    <span class=s1>&#39;JWT_VERIFY_EXPIRATION&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-4-4 name=__codelineno-4-4></a>    <span class=s1>&#39;JWT_LONG_RUNNING_REFRESH_TOKEN&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-4-5 name=__codelineno-4-5></a>    <span class=s1>&#39;JWT_EXPIRATION_DELTA&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=n>minutes</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
<a id=__codelineno-4-6 name=__codelineno-4-6></a>    <span class=s1>&#39;JWT_REFRESH_EXPIRATION_DELTA&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>7</span><span class=p>),</span>
<a id=__codelineno-4-7 name=__codelineno-4-7></a>    <span class=s1>&#39;JWT_AUTHENTICATE_INTROSPECTION&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-4-8 name=__codelineno-4-8></a>    <span class=s1>&#39;JWT_REFRESH_TOKEN_N_BYTES&#39;</span><span class=p>:</span> <span class=mi>64</span><span class=p>,</span>
<a id=__codelineno-4-9 name=__codelineno-4-9></a>    <span class=s1>&#39;JWT_PRIVATE_KEY&#39;</span><span class=p>:</span> <span class=n>base64</span><span class=o>.</span><span class=n>b64decode</span><span class=p>(</span><span class=s1>&#39;YOUR_PRIVATE_KEY&#39;</span><span class=p>),</span>
<a id=__codelineno-4-10 name=__codelineno-4-10></a>    <span class=s1>&#39;JWT_PUBLIC_KEY&#39;</span><span class=p>:</span> <span class=n>base64</span><span class=o>.</span><span class=n>b64decode</span><span class=p>(</span><span class=s1>&#39;YOUR_PUBLIC_KEY&#39;</span><span class=p>)</span>
<a id=__codelineno-4-11 name=__codelineno-4-11></a><span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>If you set <code>JWT_LONG_RUNNING_REFRESH_TOKEN</code> to <code>True</code> you will need to add the following to your settings file:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>settings.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span>
<span class=normal><a href=#__codelineno-5-2>2</a></span>
<span class=normal><a href=#__codelineno-5-3>3</a></span>
<span class=normal><a href=#__codelineno-5-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-5-2 name=__codelineno-5-2></a>    <span class=o>...</span>
<a id=__codelineno-5-3 name=__codelineno-5-3></a>    <span class=s1>&#39;strawberry_django_extras.jwt.refresh_token.apps.RefreshTokenConfig&#39;</span><span class=p>,</span>
<a id=__codelineno-5-4 name=__codelineno-5-4></a><span class=p>]</span>
</code></pre></div></td></tr></table></div> <p>and run <code>python manage.py migrate</code> to create the refresh token model.</p> <p>If you set <code>JWT_AUTHENTICATE_INTROSPECTION</code> to <code>True</code> you will need to add an extension to the root of your schema:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>schema.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1> 1</a></span>
<span class=normal><a href=#__codelineno-6-2> 2</a></span>
<span class=normal><a href=#__codelineno-6-3> 3</a></span>
<span class=normal><a href=#__codelineno-6-4> 4</a></span>
<span class=normal><a href=#__codelineno-6-5> 5</a></span>
<span class=normal><a href=#__codelineno-6-6> 6</a></span>
<span class=normal><a href=#__codelineno-6-7> 7</a></span>
<span class=normal><a href=#__codelineno-6-8> 8</a></span>
<span class=normal><a href=#__codelineno-6-9> 9</a></span>
<span class=normal><a href=#__codelineno-6-10>10</a></span>
<span class=normal><a href=#__codelineno-6-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=kn>from</span> <span class=nn>strawberry_django_extras.jwt.extensions</span> <span class=kn>import</span> <span class=n>DisableAnonymousIntrospection</span>
<a id=__codelineno-6-2 name=__codelineno-6-2></a>
<a id=__codelineno-6-3 name=__codelineno-6-3></a><span class=n>schema</span> <span class=o>=</span> <span class=n>strawberry</span><span class=o>.</span><span class=n>Schema</span><span class=p>(</span>
<a id=__codelineno-6-4 name=__codelineno-6-4></a>    <span class=n>query</span><span class=o>=</span><span class=n>Query</span><span class=p>,</span>
<a id=__codelineno-6-5 name=__codelineno-6-5></a>    <span class=n>mutation</span><span class=o>=</span><span class=n>Mutation</span><span class=p>,</span>
<a id=__codelineno-6-6 name=__codelineno-6-6></a>    <span class=n>subscription</span><span class=o>=</span><span class=n>Subscription</span><span class=p>,</span>
<a id=__codelineno-6-7 name=__codelineno-6-7></a>    <span class=n>extensions</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-6-8 name=__codelineno-6-8></a>        <span class=n>DisableAnonymousIntrospection</span><span class=p>,</span>
<a id=__codelineno-6-9 name=__codelineno-6-9></a>        <span class=o>...</span>
<a id=__codelineno-6-10 name=__codelineno-6-10></a>    <span class=p>]</span>
<a id=__codelineno-6-11 name=__codelineno-6-11></a><span class=p>)</span>
</code></pre></div></td></tr></table></div> <p><br></p> <h2 id=mutation-hooks>Mutation Hooks<a class=headerlink href=#mutation-hooks title="Permanent link">&para;</a></h2> <p>Mutation hooks are provided via a <code>field_extension</code> and can be applied to any strawberry mutation.</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>hooks.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span>
<span class=normal><a href=#__codelineno-7-2>2</a></span>
<span class=normal><a href=#__codelineno-7-3>3</a></span>
<span class=normal><a href=#__codelineno-7-4>4</a></span>
<span class=normal><a href=#__codelineno-7-5>5</a></span>
<span class=normal><a href=#__codelineno-7-6>6</a></span>
<span class=normal><a href=#__codelineno-7-7>7</a></span>
<span class=normal><a href=#__codelineno-7-8>8</a></span>
<span class=normal><a href=#__codelineno-7-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=k>def</span> <span class=nf>update_user_pre</span><span class=p>(</span><span class=n>info</span><span class=p>:</span> <span class=n>Info</span><span class=p>,</span> <span class=n>mutation_input</span><span class=p>:</span> <span class=n>UserUpdateInput</span><span class=p>):</span>
<a id=__codelineno-7-2 name=__codelineno-7-2></a>    <span class=n>mutation_input</span><span class=o>.</span><span class=n>lastname</span> <span class=o>=</span> <span class=n>mutation_input</span><span class=o>.</span><span class=n>lastname</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
<a id=__codelineno-7-3 name=__codelineno-7-3></a>
<a id=__codelineno-7-4 name=__codelineno-7-4></a><span class=k>async</span> <span class=k>def</span> <span class=nf>update_user_post</span><span class=p>(</span>
<a id=__codelineno-7-5 name=__codelineno-7-5></a>    <span class=n>info</span><span class=p>:</span> <span class=n>Info</span><span class=p>,</span> 
<a id=__codelineno-7-6 name=__codelineno-7-6></a>    <span class=n>mutation_input</span><span class=p>:</span> <span class=n>UserUpdateInput</span><span class=p>,</span>
<a id=__codelineno-7-7 name=__codelineno-7-7></a>    <span class=n>result</span><span class=p>:</span> <span class=n>Any</span>
<a id=__codelineno-7-8 name=__codelineno-7-8></a><span class=p>):</span>
<a id=__codelineno-7-9 name=__codelineno-7-9></a>    <span class=k>await</span> <span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;User </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s1> updated&#39;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <p>and then applied to your mutation:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>schema.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span>
<span class=normal><a href=#__codelineno-8-14>14</a></span>
<span class=normal><a href=#__codelineno-8-15>15</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=kn>from</span> <span class=nn>strawberry_django_extras.field_extensions</span> <span class=kn>import</span> <span class=n>mutation_hooks</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a><span class=kn>from</span> <span class=nn>strawberry_django</span> <span class=kn>import</span> <span class=n>mutations</span>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=kn>from</span> <span class=nn>.hooks</span> <span class=kn>import</span> <span class=n>update_user_pre</span><span class=p>,</span> <span class=n>update_user_post</span>
<a id=__codelineno-8-4 name=__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=nd>@strawberry</span><span class=o>.</span><span class=n>type</span>
<a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=k>class</span> <span class=nc>Mutation</span><span class=p>:</span>
<a id=__codelineno-8-7 name=__codelineno-8-7></a>    <span class=n>update_user</span><span class=p>:</span> <span class=n>UserType</span> <span class=o>=</span> <span class=n>mutations</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
<a id=__codelineno-8-8 name=__codelineno-8-8></a>        <span class=n>UserInputPartial</span><span class=p>,</span>
<a id=__codelineno-8-9 name=__codelineno-8-9></a>        <span class=n>extensions</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-8-10 name=__codelineno-8-10></a>            <span class=n>mutation_hooks</span><span class=p>(</span>
<a id=__codelineno-8-11 name=__codelineno-8-11></a>                <span class=n>pre</span><span class=o>=</span><span class=n>update_user_pre</span><span class=p>,</span>
<a id=__codelineno-8-12 name=__codelineno-8-12></a>                <span class=n>post_async</span><span class=o>=</span><span class=n>update_user_post</span>
<a id=__codelineno-8-13 name=__codelineno-8-13></a>            <span class=p>)</span>
<a id=__codelineno-8-14 name=__codelineno-8-14></a>        <span class=p>]</span>
<a id=__codelineno-8-15 name=__codelineno-8-15></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> </div> <p>You might have noticed that we are passing both a sync and an async function at the same time. This is possible because if the context is async the sync function will be wrapped with sync_to_async and awaited. If the context is sync passing post_async and pre_async will be ignored. In either case the async functions are awaited.</p> <p><br></p> <h2 id=input-validations>Input Validations<a class=headerlink href=#input-validations title="Permanent link">&para;</a></h2> <p>Much inspired by the way <a href=https://github.com/tOgg1/graphene-django-cud target=_blank>graphene-django-cud</a> handles validation, this package provides a similar way to validate your input when the respective input classes are instantiated.</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>inputs.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1> 1</a></span>
<span class=normal><a href=#__codelineno-9-2> 2</a></span>
<span class=normal><a href=#__codelineno-9-3> 3</a></span>
<span class=normal><a href=#__codelineno-9-4> 4</a></span>
<span class=normal><a href=#__codelineno-9-5> 5</a></span>
<span class=normal><a href=#__codelineno-9-6> 6</a></span>
<span class=normal><a href=#__codelineno-9-7> 7</a></span>
<span class=normal><a href=#__codelineno-9-8> 8</a></span>
<span class=normal><a href=#__codelineno-9-9> 9</a></span>
<span class=normal><a href=#__codelineno-9-10>10</a></span>
<span class=normal><a href=#__codelineno-9-11>11</a></span>
<span class=normal><a href=#__codelineno-9-12>12</a></span>
<span class=normal><a href=#__codelineno-9-13>13</a></span>
<span class=normal><a href=#__codelineno-9-14>14</a></span>
<span class=normal><a href=#__codelineno-9-15>15</a></span>
<span class=normal><a href=#__codelineno-9-16>16</a></span>
<span class=normal><a href=#__codelineno-9-17>17</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=nd>@strawberry_django</span><span class=o>.</span><span class=n>input</span><span class=p>(</span><span class=n>get_user_model</span><span class=p>())</span>
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=k>class</span> <span class=nc>UserInput</span><span class=p>:</span>
<a id=__codelineno-9-3 name=__codelineno-9-3></a>    <span class=n>firstname</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-9-4 name=__codelineno-9-4></a>    <span class=n>lastname</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-9-5 name=__codelineno-9-5></a>
<a id=__codelineno-9-6 name=__codelineno-9-6></a>    <span class=k>def</span> <span class=nf>validate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>info</span><span class=p>):</span>
<a id=__codelineno-9-7 name=__codelineno-9-7></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>firstname</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>lastname</span><span class=p>:</span>
<a id=__codelineno-9-8 name=__codelineno-9-8></a>            <span class=k>raise</span> <span class=n>ValidationError</span><span class=p>(</span>
<a id=__codelineno-9-9 name=__codelineno-9-9></a>                <span class=s2>&quot;Firstname and lastname cannot be the same&quot;</span>
<a id=__codelineno-9-10 name=__codelineno-9-10></a>            <span class=p>)</span>
<a id=__codelineno-9-11 name=__codelineno-9-11></a>
<a id=__codelineno-9-12 name=__codelineno-9-12></a>    <span class=c1># Or for individual fields    </span>
<a id=__codelineno-9-13 name=__codelineno-9-13></a>    <span class=k>def</span> <span class=nf>validate_lastname</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>info</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<a id=__codelineno-9-14 name=__codelineno-9-14></a>        <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>firstname</span><span class=p>:</span>
<a id=__codelineno-9-15 name=__codelineno-9-15></a>            <span class=k>raise</span> <span class=n>ValidationError</span><span class=p>(</span>
<a id=__codelineno-9-16 name=__codelineno-9-16></a>                <span class=s2>&quot;Firstname and lastname cannot be the same&quot;</span>
<a id=__codelineno-9-17 name=__codelineno-9-17></a>            <span class=p>)</span>
</code></pre></div></td></tr></table></div> <p>When updating an existing object the <code>pk</code> will be available through <code>self.id</code> so you can validate values in comparison to existing ones. Also info is provided in case validations need to be run against the user making the request.</p> <p>Finally add this to each mutation that needs to run validations:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>schema.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span>
<span class=normal><a href=#__codelineno-10-4>4</a></span>
<span class=normal><a href=#__codelineno-10-5>5</a></span>
<span class=normal><a href=#__codelineno-10-6>6</a></span>
<span class=normal><a href=#__codelineno-10-7>7</a></span>
<span class=normal><a href=#__codelineno-10-8>8</a></span>
<span class=normal><a href=#__codelineno-10-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=kn>from</span> <span class=nn>strawberry_django_extras.field_extensions</span> <span class=kn>import</span> <span class=n>with_validation</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=kn>from</span> <span class=nn>strawberry_django</span> <span class=kn>import</span> <span class=n>mutations</span>
<a id=__codelineno-10-3 name=__codelineno-10-3></a>
<a id=__codelineno-10-4 name=__codelineno-10-4></a><span class=nd>@strawberry</span><span class=o>.</span><span class=n>type</span>
<a id=__codelineno-10-5 name=__codelineno-10-5></a><span class=k>class</span> <span class=nc>Mutation</span><span class=p>:</span>
<a id=__codelineno-10-6 name=__codelineno-10-6></a>    <span class=n>create_user</span><span class=p>:</span> <span class=n>UserType</span> <span class=o>=</span> <span class=n>mutations</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
<a id=__codelineno-10-7 name=__codelineno-10-7></a>        <span class=n>UserInput</span><span class=p>,</span>
<a id=__codelineno-10-8 name=__codelineno-10-8></a>        <span class=n>extensions</span><span class=o>=</span><span class=p>[</span><span class=n>with_validation</span><span class=p>()]</span>
<a id=__codelineno-10-9 name=__codelineno-10-9></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> <p><br></p> <h2 id=permissions>Permissions<a class=headerlink href=#permissions title="Permanent link">&para;</a></h2> <p>Similarly to validations, permission checking is run on input instantiation. Since strawberry does not currently provide a way to pass <code>permission_classes</code> to input fields this package allows you to write your permission checking functions as part of the input class.</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>inputs.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1> 1</a></span>
<span class=normal><a href=#__codelineno-11-2> 2</a></span>
<span class=normal><a href=#__codelineno-11-3> 3</a></span>
<span class=normal><a href=#__codelineno-11-4> 4</a></span>
<span class=normal><a href=#__codelineno-11-5> 5</a></span>
<span class=normal><a href=#__codelineno-11-6> 6</a></span>
<span class=normal><a href=#__codelineno-11-7> 7</a></span>
<span class=normal><a href=#__codelineno-11-8> 8</a></span>
<span class=normal><a href=#__codelineno-11-9> 9</a></span>
<span class=normal><a href=#__codelineno-11-10>10</a></span>
<span class=normal><a href=#__codelineno-11-11>11</a></span>
<span class=normal><a href=#__codelineno-11-12>12</a></span>
<span class=normal><a href=#__codelineno-11-13>13</a></span>
<span class=normal><a href=#__codelineno-11-14>14</a></span>
<span class=normal><a href=#__codelineno-11-15>15</a></span>
<span class=normal><a href=#__codelineno-11-16>16</a></span>
<span class=normal><a href=#__codelineno-11-17>17</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=nd>@strawberry_django</span><span class=o>.</span><span class=n>input</span><span class=p>(</span><span class=n>get_user_model</span><span class=p>())</span>
<a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=k>class</span> <span class=nc>UserInput</span><span class=p>:</span>
<a id=__codelineno-11-3 name=__codelineno-11-3></a>    <span class=n>firstname</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-11-4 name=__codelineno-11-4></a>    <span class=n>lastname</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-11-5 name=__codelineno-11-5></a>
<a id=__codelineno-11-6 name=__codelineno-11-6></a>    <span class=k>def</span> <span class=nf>check_permissions</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>info</span><span class=p>):</span>
<a id=__codelineno-11-7 name=__codelineno-11-7></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>info</span><span class=o>.</span><span class=n>context</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>is_staff</span><span class=p>:</span>
<a id=__codelineno-11-8 name=__codelineno-11-8></a>            <span class=k>raise</span> <span class=n>PermissionDenied</span><span class=p>(</span>
<a id=__codelineno-11-9 name=__codelineno-11-9></a>                <span class=s2>&quot;You need to be staff to do this&quot;</span>
<a id=__codelineno-11-10 name=__codelineno-11-10></a>            <span class=p>)</span>
<a id=__codelineno-11-11 name=__codelineno-11-11></a>
<a id=__codelineno-11-12 name=__codelineno-11-12></a>    <span class=c1># Or for individual fields    </span>
<a id=__codelineno-11-13 name=__codelineno-11-13></a>    <span class=k>def</span> <span class=nf>check_permissions_lastname</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>info</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<a id=__codelineno-11-14 name=__codelineno-11-14></a>        <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=n>info</span><span class=o>.</span><span class=n>context</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>lastname</span><span class=p>:</span>
<a id=__codelineno-11-15 name=__codelineno-11-15></a>            <span class=k>raise</span> <span class=n>PermissionDenied</span><span class=p>(</span>
<a id=__codelineno-11-16 name=__codelineno-11-16></a>                <span class=s2>&quot;You cannot create a user with the same lastname as you&quot;</span>
<a id=__codelineno-11-17 name=__codelineno-11-17></a>            <span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>schema.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span>
<span class=normal><a href=#__codelineno-12-2>2</a></span>
<span class=normal><a href=#__codelineno-12-3>3</a></span>
<span class=normal><a href=#__codelineno-12-4>4</a></span>
<span class=normal><a href=#__codelineno-12-5>5</a></span>
<span class=normal><a href=#__codelineno-12-6>6</a></span>
<span class=normal><a href=#__codelineno-12-7>7</a></span>
<span class=normal><a href=#__codelineno-12-8>8</a></span>
<span class=normal><a href=#__codelineno-12-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=kn>from</span> <span class=nn>strawberry_django_extras.field_extensions</span> <span class=kn>import</span> <span class=n>with_permissions</span>
<a id=__codelineno-12-2 name=__codelineno-12-2></a><span class=kn>from</span> <span class=nn>strawberry_django</span> <span class=kn>import</span> <span class=n>mutations</span>
<a id=__codelineno-12-3 name=__codelineno-12-3></a>
<a id=__codelineno-12-4 name=__codelineno-12-4></a><span class=nd>@strawberry</span><span class=o>.</span><span class=n>type</span>
<a id=__codelineno-12-5 name=__codelineno-12-5></a><span class=k>class</span> <span class=nc>Mutation</span><span class=p>:</span>
<a id=__codelineno-12-6 name=__codelineno-12-6></a>    <span class=n>create_user</span><span class=p>:</span> <span class=n>UserType</span> <span class=o>=</span> <span class=n>mutations</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
<a id=__codelineno-12-7 name=__codelineno-12-7></a>        <span class=n>UserInput</span><span class=p>,</span>
<a id=__codelineno-12-8 name=__codelineno-12-8></a>        <span class=n>extensions</span><span class=o>=</span><span class=p>[</span><span class=n>with_permissions</span><span class=p>()]</span>
<a id=__codelineno-12-9 name=__codelineno-12-9></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> </div> <p>As documented by Strawberry extension order does matter so make sure you are passing the <code>with_permissions()</code> and <code>with_validation()</code> extensions in an order that makes sense for your project.</p> <p><br></p> <h2 id=nested-mutations>Nested Mutations<a class=headerlink href=#nested-mutations title="Permanent link">&para;</a></h2> <p>This package provides support for deeply nested mutations through a field extension and some wrapper input classes.</p> <p>It makes sense for the inputs to be different when updating an object vs creating one. So we provide different input wrappers for each type of operation. It also makes sense that the api provided would be different depending on the type of relationship between the related models. Brief explanations of each input wrapper is provided below. For details refer to relevant guide on <a href=../guide/mutations/ >nested mutations</a>.</p> <h3 id=wrappers-for-nested-objects-for-create-mutations>Wrappers for nested objects for create mutations<a class=headerlink href=#wrappers-for-nested-objects-for-create-mutations title="Permanent link">&para;</a></h3> <h4 id=one-to-one>One to One<a class=headerlink href=#one-to-one title="Permanent link">&para;</a></h4> <p><code>CRUDOneToOneCreateInput</code> can be used when you want to create or assign a related object, alongside the creation of your root object. The resulting schema will provide two actions for your mutation <code>create</code> and <code>assign</code> which are mutually exclusive. <code>create</code> is of type <code>UserCreateInput</code> which you will need to provide and <code>assign</code> is of type <code>ID</code>. A brief example follows.</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>models.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1> 1</a></span>
<span class=normal><a href=#__codelineno-13-2> 2</a></span>
<span class=normal><a href=#__codelineno-13-3> 3</a></span>
<span class=normal><a href=#__codelineno-13-4> 4</a></span>
<span class=normal><a href=#__codelineno-13-5> 5</a></span>
<span class=normal><a href=#__codelineno-13-6> 6</a></span>
<span class=normal><a href=#__codelineno-13-7> 7</a></span>
<span class=normal><a href=#__codelineno-13-8> 8</a></span>
<span class=normal><a href=#__codelineno-13-9> 9</a></span>
<span class=normal><a href=#__codelineno-13-10>10</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1></a>    <span class=k>class</span> <span class=nc>User</span><span class=p>(</span><span class=n>AbstractBaseUser</span><span class=p>,</span> <span class=n>PermissionsMixin</span><span class=p>):</span>
<a id=__codelineno-13-2 name=__codelineno-13-2></a>        <span class=n>firstname</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-13-3 name=__codelineno-13-3></a>        <span class=n>lastname</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-13-4 name=__codelineno-13-4></a>        <span class=n>email</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>EmailField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>254</span><span class=p>,</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>   
<a id=__codelineno-13-5 name=__codelineno-13-5></a>        <span class=n>USERNAME_FIELD</span> <span class=o>=</span> <span class=s1>&#39;email&#39;</span>
<a id=__codelineno-13-6 name=__codelineno-13-6></a>        <span class=n>EMAIL_FIELD</span> <span class=o>=</span> <span class=s1>&#39;email&#39;</span>
<a id=__codelineno-13-7 name=__codelineno-13-7></a>
<a id=__codelineno-13-8 name=__codelineno-13-8></a>    <span class=k>class</span> <span class=nc>Goat</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-13-9 name=__codelineno-13-9></a>        <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-13-10 name=__codelineno-13-10></a>        <span class=n>user</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>OneToOneField</span><span class=p>(</span><span class=n>User</span><span class=p>,</span> <span class=n>related_name</span><span class=o>=</span><span class=s2>&quot;goat&quot;</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>inputs.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1> 1</a></span>
<span class=normal><a href=#__codelineno-14-2> 2</a></span>
<span class=normal><a href=#__codelineno-14-3> 3</a></span>
<span class=normal><a href=#__codelineno-14-4> 4</a></span>
<span class=normal><a href=#__codelineno-14-5> 5</a></span>
<span class=normal><a href=#__codelineno-14-6> 6</a></span>
<span class=normal><a href=#__codelineno-14-7> 7</a></span>
<span class=normal><a href=#__codelineno-14-8> 8</a></span>
<span class=normal><a href=#__codelineno-14-9> 9</a></span>
<span class=normal><a href=#__codelineno-14-10>10</a></span>
<span class=normal><a href=#__codelineno-14-11>11</a></span>
<span class=normal><a href=#__codelineno-14-12>12</a></span>
<span class=normal><a href=#__codelineno-14-13>13</a></span>
<span class=normal><a href=#__codelineno-14-14>14</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1></a>    <span class=kn>from</span> <span class=nn>strawberry_django_extras.inputs</span> <span class=kn>import</span> <span class=n>CRUDOneToOneCreateInput</span>
<a id=__codelineno-14-2 name=__codelineno-14-2></a>
<a id=__codelineno-14-3 name=__codelineno-14-3></a>    <span class=nd>@strawberry_django</span><span class=o>.</span><span class=n>input</span><span class=p>(</span><span class=n>get_user_model</span><span class=p>())</span>
<a id=__codelineno-14-4 name=__codelineno-14-4></a>    <span class=k>class</span> <span class=nc>UserInput</span><span class=p>:</span>
<a id=__codelineno-14-5 name=__codelineno-14-5></a>        <span class=n>firstname</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-14-6 name=__codelineno-14-6></a>        <span class=n>lastname</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-14-7 name=__codelineno-14-7></a>        <span class=n>email</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-14-8 name=__codelineno-14-8></a>        <span class=n>password</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-14-9 name=__codelineno-14-9></a>        <span class=n>goat</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>CRUDOneToOneCreateInput</span><span class=p>[</span><span class=n>GoatInput</span><span class=p>]]</span> <span class=o>=</span> <span class=n>UNSET</span>
<a id=__codelineno-14-10 name=__codelineno-14-10></a>
<a id=__codelineno-14-11 name=__codelineno-14-11></a>    <span class=nd>@strawberry_django</span><span class=o>.</span><span class=n>input</span><span class=p>(</span><span class=n>Goat</span><span class=p>)</span>
<a id=__codelineno-14-12 name=__codelineno-14-12></a>    <span class=k>class</span> <span class=nc>GoatInput</span><span class=p>:</span>
<a id=__codelineno-14-13 name=__codelineno-14-13></a>        <span class=n>name</span><span class=p>:</span> <span class=n>auto</span>
<a id=__codelineno-14-14 name=__codelineno-14-14></a>        <span class=n>user</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>CRUDOneToOneCreateInput</span><span class=p>[</span><span class=s1>&#39;UserInput&#39;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>UNSET</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>schema.py</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-1> 1</a></span>
<span class=normal><a href=#__codelineno-15-2> 2</a></span>
<span class=normal><a href=#__codelineno-15-3> 3</a></span>
<span class=normal><a href=#__codelineno-15-4> 4</a></span>
<span class=normal><a href=#__codelineno-15-5> 5</a></span>
<span class=normal><a href=#__codelineno-15-6> 6</a></span>
<span class=normal><a href=#__codelineno-15-7> 7</a></span>
<span class=normal><a href=#__codelineno-15-8> 8</a></span>
<span class=normal><a href=#__codelineno-15-9> 9</a></span>
<span class=normal><a href=#__codelineno-15-10>10</a></span>
<span class=normal><a href=#__codelineno-15-11>11</a></span>
<span class=normal><a href=#__codelineno-15-12>12</a></span>
<span class=normal><a href=#__codelineno-15-13>13</a></span>
<span class=normal><a href=#__codelineno-15-14>14</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1></a>    <span class=kn>from</span> <span class=nn>strawberry_django_extras.field_extensions</span> <span class=kn>import</span> <span class=n>with_cud_relationships</span>
<a id=__codelineno-15-2 name=__codelineno-15-2></a>    <span class=kn>from</span> <span class=nn>strawberry_django</span> <span class=kn>import</span> <span class=n>mutations</span>
<a id=__codelineno-15-3 name=__codelineno-15-3></a>
<a id=__codelineno-15-4 name=__codelineno-15-4></a>    <span class=nd>@strawberry</span><span class=o>.</span><span class=n>type</span>
<a id=__codelineno-15-5 name=__codelineno-15-5></a>    <span class=k>class</span> <span class=nc>Mutation</span><span class=p>:</span>
<a id=__codelineno-15-6 name=__codelineno-15-6></a>        <span class=n>create_user</span><span class=p>:</span> <span class=n>UserType</span> <span class=o>=</span> <span class=n>mutations</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
<a id=__codelineno-15-7 name=__codelineno-15-7></a>            <span class=n>UserInput</span><span class=p>,</span>
<a id=__codelineno-15-8 name=__codelineno-15-8></a>            <span class=n>extensions</span><span class=o>=</span><span class=p>[</span><span class=n>with_cud_relationships</span><span class=p>()]</span>
<a id=__codelineno-15-9 name=__codelineno-15-9></a>        <span class=p>)</span>
<a id=__codelineno-15-10 name=__codelineno-15-10></a>
<a id=__codelineno-15-11 name=__codelineno-15-11></a>        <span class=n>create_goat</span><span class=p>:</span> <span class=n>GoatType</span> <span class=o>=</span> <span class=n>mutations</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
<a id=__codelineno-15-12 name=__codelineno-15-12></a>            <span class=n>GoatInput</span><span class=p>,</span>
<a id=__codelineno-15-13 name=__codelineno-15-13></a>            <span class=n>extensions</span><span class=o>=</span><span class=p>[</span><span class=n>with_cud_relationships</span><span class=p>()]</span>
<a id=__codelineno-15-14 name=__codelineno-15-14></a>        <span class=p>)</span>
</code></pre></div></td></tr></table></div> <p>Now we can create or assign nested objects on either side of the relationship.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-16-1> 1</a></span>
<span class=normal><a href=#__codelineno-16-2> 2</a></span>
<span class=normal><a href=#__codelineno-16-3> 3</a></span>
<span class=normal><a href=#__codelineno-16-4> 4</a></span>
<span class=normal><a href=#__codelineno-16-5> 5</a></span>
<span class=normal><a href=#__codelineno-16-6> 6</a></span>
<span class=normal><a href=#__codelineno-16-7> 7</a></span>
<span class=normal><a href=#__codelineno-16-8> 8</a></span>
<span class=normal><a href=#__codelineno-16-9> 9</a></span>
<span class=normal><a href=#__codelineno-16-10>10</a></span>
<span class=normal><a href=#__codelineno-16-11>11</a></span>
<span class=normal><a href=#__codelineno-16-12>12</a></span>
<span class=normal><a href=#__codelineno-16-13>13</a></span>
<span class=normal><a href=#__codelineno-16-14>14</a></span>
<span class=normal><a href=#__codelineno-16-15>15</a></span>
<span class=normal><a href=#__codelineno-16-16>16</a></span>
<span class=normal><a href=#__codelineno-16-17>17</a></span>
<span class=normal><a href=#__codelineno-16-18>18</a></span>
<span class=normal><a href=#__codelineno-16-19>19</a></span>
<span class=normal><a href=#__codelineno-16-20>20</a></span>
<span class=normal><a href=#__codelineno-16-21>21</a></span>
<span class=normal><a href=#__codelineno-16-22>22</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1></a><span class=k>mutation</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-16-2 name=__codelineno-16-2></a><span class=w>    </span><span class=n>createGoat</span><span class=p>(</span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-16-3 name=__codelineno-16-3></a><span class=w>        </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Marina&quot;</span>
<a id=__codelineno-16-4 name=__codelineno-16-4></a><span class=w>        </span><span class=n>user</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-16-5 name=__codelineno-16-5></a><span class=w>            </span><span class=n>create</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-16-6 name=__codelineno-16-6></a><span class=w>                </span><span class=n>firstname</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Lakis&quot;</span>
<a id=__codelineno-16-7 name=__codelineno-16-7></a><span class=w>                </span><span class=n>lastname</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Lalakis&quot;</span>
<a id=__codelineno-16-8 name=__codelineno-16-8></a><span class=w>                </span><span class=n>email</span><span class=p>:</span><span class=w> </span><span class=s>&quot;lalakis@domaim.tld&quot;</span>
<a id=__codelineno-16-9 name=__codelineno-16-9></a><span class=w>                </span><span class=n>password</span><span class=p>:</span><span class=w> </span><span class=s>&quot;abc&quot;</span>
<a id=__codelineno-16-10 name=__codelineno-16-10></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-16-11 name=__codelineno-16-11></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-16-12 name=__codelineno-16-12></a><span class=w>    </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-16-13 name=__codelineno-16-13></a><span class=w>        </span><span class=n>id</span>
<a id=__codelineno-16-14 name=__codelineno-16-14></a><span class=w>        </span><span class=n>name</span>
<a id=__codelineno-16-15 name=__codelineno-16-15></a><span class=w>        </span><span class=n>user</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-16-16 name=__codelineno-16-16></a><span class=w>            </span><span class=n>id</span>
<a id=__codelineno-16-17 name=__codelineno-16-17></a><span class=w>            </span><span class=n>lastname</span>
<a id=__codelineno-16-18 name=__codelineno-16-18></a><span class=w>            </span><span class=n>firstname</span>
<a id=__codelineno-16-19 name=__codelineno-16-19></a><span class=w>            </span><span class=n>email</span>
<a id=__codelineno-16-20 name=__codelineno-16-20></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-16-21 name=__codelineno-16-21></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-16-22 name=__codelineno-16-22></a><span class=p>}</span>
</code></pre></div></td></tr></table></div> <h4 id=one-to-many>One to Many<a class=headerlink href=#one-to-many title="Permanent link">&para;</a></h4> <p><code>CRUDOneToManyCreateInput</code>. Similarly to the one to one wrapper it provides two actions <code>create</code> and <code>assign</code> which are mutually exclusive. The only difference is that the relationship is through a <code>ForeignKey</code> meaning the other side of the relationship would be Many to One requiring a different wrapper.</p> <h4 id=many-to-one>Many to One<a class=headerlink href=#many-to-one title="Permanent link">&para;</a></h4> <p><code>CRUDManyToOneCreateInput</code>. This wrapper is used when the relationship is Many to One. It provides two actions <code>create</code> and <code>assign</code> which are <strong>NOT mutually exclusive</strong>. The inputs are of course lists and of type <code>SomeModelInput</code> and <code>ID</code> respectively.</p> <h4 id=many-to-many>Many to Many<a class=headerlink href=#many-to-many title="Permanent link">&para;</a></h4> <p><code>CRUDManyToManyCreateInput</code> is provided for Many-to-Many relationships. It provides two actions <code>create</code> and <code>assign</code> which are <strong>NOT mutually exclusive</strong>. The inputs are ofcourse lists again but there's one important difference. They are internally wrapped again to provide a mechanism for the user to provide <code>through_defaults</code> for the relationship either on assignment or creation. The type for through_defaults is JSON and the values should follow snake case.</p> <h3 id=wrappers-for-nested-objects-for-update-mutations>Wrappers for nested objects for update mutations<a class=headerlink href=#wrappers-for-nested-objects-for-update-mutations title="Permanent link">&para;</a></h3> <p>These wrappers expect two inputs to be provided instead of the one that was necessary for creation. The first is for creation of new related objects when updating the current object and the second is for updates to the data of already related objects.</p> <h4 id=one-to-one_1>One to One<a class=headerlink href=#one-to-one_1 title="Permanent link">&para;</a></h4> <p><code>CRUDOneToOneUpdateInput</code> can be used when alongside an update mutation you want to update related objects. The resulting schema will provide three possible actions for your mutation and a boolean flag.</p> <ul> <li><code>create</code> of type <code>UserInput</code> used to create a new related object.</li> <li><code>assign</code> of type <code>ID</code> used to assign an existing objects as related.<blockquote> <p>Note that you can use <code>null</code> to remove the relationship if the field is nullable.</p> </blockquote> </li> <li><code>update</code> of type <code>UserPartial</code> used to update the fields of an existing related object.</li> <li><code>delete</code> of type <code>bool</code> indicating whether the related object should be deleted.<blockquote> <p>Note that this flag can be used together with assign or create to delete the previously related object.</p> </blockquote> </li> </ul> <h4 id=one-to-many_1>One to Many<a class=headerlink href=#one-to-many_1 title="Permanent link">&para;</a></h4> <p><code>CRUDOneToManyUpdateInput</code> can be used when alongside an update mutation you want to update related objects. The resulting schema will provide three possible actions for your mutation and a boolean flag. These are the same as the ones provided by the One to One wrapper, and they function in exactly the same fashion.</p> <p>For a more detailed explanation with examples please refer to the relevant guide on <a href=../guide/mutations/ >nested mutations</a>.</p> <h4 id=many-to-one_1>Many to One<a class=headerlink href=#many-to-one_1 title="Permanent link">&para;</a></h4> <p><code>CRUDManyToOneUpdateInput</code> can be used when alongside an update mutation you want to update related objects. The resulting schema will provide <strong>four</strong> possible actions for your mutation. These are as follows:</p> <ul> <li><code>create</code> of type <code>List[UserInput]</code> used to create new related objects.</li> <li><code>assign</code> of type <code>List[ID]</code> used to assign relations with existing objects.</li> <li><code>update</code> of type <code>List[UserPartial]</code> used to update the fields of existing related objects.</li> <li><code>remove</code> of type <code>List[CRUDRemoveInput]</code> which wraps an <code>ID</code> and a <code>bool</code> flag indicating whether the removed object should be deleted.</li> </ul> <h4 id=many-to-many_1>Many to Many<a class=headerlink href=#many-to-many_1 title="Permanent link">&para;</a></h4> <p><code>CRUDManyToManyUpdateInput</code> can be used when alongside an update mutation you want to update related objects. The resulting schema will provide <strong>four</strong> possible actions for your mutation. These are as follows:</p> <ul> <li><code>create</code> of type <code>List[CRUDManyToManyItem]</code> which wraps two inputs.<ul> <li><code>objectData</code> of type <code>UserInput</code> used for the fields of the related object.</li> <li><code>throughDefaults</code> of type <code>JSON</code> used for any data stored in the <code>through</code> model if one exists.</li> </ul> </li> <li><code>assign</code> of type <code>List[CRUDManyToManyID]</code> which wraps two inputs.<ul> <li><code>id</code> of type <code>ID</code> used to assign relations with existing objects.</li> <li><code>throughDefaults</code> of type <code>JSON</code> used for any data stored in the <code>through</code> model if one exists.</li> </ul> </li> <li><code>update</code> of type <code>List[CRUDManyToManyItemUpdate]</code> which wraps two inputs.<ul> <li><code>objectData</code> of type <code>UserPartial</code> used to update the fields of the related object.</li> <li><code>throughDefaults</code> of type <code>JSON</code> used to update the fields of the <code>through</code> model if one exists.</li> </ul> </li> <li><code>remove</code> of type <code>List[CRUDRemoveInput]</code> which wraps an <code>ID</code> and a <code>bool</code> flag indicating whether the removed object should be deleted.</li> </ul> <p>For a more detailed explanation with examples please refer to the relevant guide on <a href=../guide/mutations/ >nested mutations</a>.</p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.code.annotate", "navigation.instant"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.6c14ae12.min.js></script> </body> </html>